## SQL - Structured Query Language

SQL — язык запросов для управления реляционными базами данных
[INFO habr.com](https://habr.com/ru/articles/564390/#%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B-sql)

### Виды SQL-запросов

| Operators                                                        | Reduction | Request example                     | Description                                                                                                          |
|------------------------------------------------------------------|-----------|-------------------------------------|----------------------------------------------------------------------------------------------------------------------|
| Data Definition Language \ Операторы определения данных          | DDL       | `CREATE` `DROP` `RENAME` `ALTER`    | чтобы определять данные, эти запросы позволяют настраивать базу данных — создавать с нуля и прописывать её структуру |
| Data Manipulation Language \ Операторы манипуляции данными       | DML       | `SELECT` `UPDATE` `DELETE` `INSERT` | чтобы управлять данными в таблицах, эти запросы помогают добавлять, обновлять, удалять и выбирать данные             |
| Data Control Language \ Операторы определения доступа к данным   | DCL       | `GRANT` `REVOKE` `DENY`             | чтобы выдавать или отзывать права доступа для пользователей                                                          |
| Transaction Control Language \ Операторы управления транзакциями | TCL       | `COMMIT` `ROLLBACK` `BEGIN`         | чтобы управлять транзакциями. Это могут быть запросы, связанные с подтверждением или откатом изменений в базе данных |

### SQL request structure

| cmd structure | Description                                                       |
|---------------|-------------------------------------------------------------------|
| `SELECT`      | выбирает отдельные столбцы или всю таблицу целиком (обязательный) |
| `FROM`        | из какой таблицы получить данные (обязательный)                   |
| `WHERE`       | условие, по которому SQL выбирает данные                          |
| `GROUP BY`    | столбец, по которому мы будут группироваться данные               |
| `HAVING`      | условие, по которому сгруппированные данные будут отфильтрованы   |
| `ORDER BY`    | столбец, по которому данные будут отсортированы                   |

### SQL CMDS

| cmd                                     | Description                                                                                                                                                         |
|-----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `CREATE`                                | Создает новую таблицу, представление таблицы или другой объект в БД                                                                                                 |
| `ALTER`                                 | Модифицирует существующий в БД объект, такой как таблица                                                                                                            |
| `DROP`                                  | Удаляет существующую таблицу, представление таблицы или другой объект в БД                                                                                          |
| `SELECT`                                | Извлекает записи из одной или нескольких таблиц                                                                                                                     |
| `INSERT`                                | Создает записи                                                                                                                                                      |
| `UPDATE`                                | Модифицирует записи                                                                                                                                                 |
| `DELETE`                                | Удаляет записи                                                                                                                                                      |
| `GRANT`                                 | Наделяет пользователя правами                                                                                                                                       |
| `REVOKE`                                | Отменяет права пользователя                                                                                                                                         |
| `SHOW`                                  | Получение списка таблиц                                                                                                                                             |
| `USE`                                   | Выбор БД                                                                                                                                                            |
| `ORDER BY`                              | используется для сортировки данных по возрастанию `ASC` или убыванию `DESC`                                                                                         |
| `GROUP BY`                              | используется совместно с инструкцией `SELECT` для группировки записей                                                                                               |
| `DISTINCT`                              | используется совместно с инструкцией SELECT для возврата только уникальных записей (без дубликатов)                                                                 |
| `INNER JOIN`                            | возвращает записи, имеющиеся в обеих таблицах                                                                                                                       |
| `LEFT JOIN`                             | возвращает записи из левой таблицы, даже если такие записи отсутствуют в правой таблице                                                                             |
| `RIGHT JOIN`                            | возвращает записи из правой таблицы, даже если такие записи отсутствуют в левой таблице                                                                             |
| `FULL JOIN`                             | возвращает все записи объединяемых таблиц                                                                                                                           |
| `CROSS JOIN`                            | возвращает все возможные комбинации строк обеих таблиц                                                                                                              |
| `SELF JOIN`                             | используется для объединения таблицы с самой собой                                                                                                                  |
| `UNION`                                 | используется для комбинации результатов двух и более инструкций SELECT. При этом, возвращаются только уникальные записи                                             |
| `UNION ALL`                             | используется для объединения результатов двух и более инструкций SELECT. При этом, возвращаются все записи, включая дубликаты                                       |
| `AS`                                    | синоним позволяет временно изменять названия таблиц и колонок                                                                                                       |
| `INDEX`                                 | специальные поисковые таблицы, которые используются движком БД в целях более быстрого извлечения данных                                                             |
| `VIEW`                                  | инструкция, записанная в БД под определенным названием                                                                                                              |
| `WITH CHECK OPTION`                     | Надстройка инструкции `CREATE VIEW`, позволяет обеспечить соответствие всех `UPDATE` и `INSERT` условию, определенном в представлении                               |
| `HAVING`                                | используется для фильтрации результатов группировки. `WHERE` используется для применения условий к колонкам, а `HAVING` — к группам, созданным с помощью `GROUP BY` |
| `BEGIN TRANSACTION` `START TRANSACTION` | запуск транзакции                                                                                                                                                   |
| `COMMIT`                                | сохранение изменений                                                                                                                                                |
| `ROLLBACK`                              | отмена изменений                                                                                                                                                    |
| `SAVEPOINT`                             | контрольная точка для отмены изменений                                                                                                                              |
| `SET TRANSACTION`                       | установка характеристик текущей транзакции                                                                                                                          |

| Restrictions  | Description                                                                                   |
|---------------|-----------------------------------------------------------------------------------------------|
| `NOT NULL`    | колонка не может иметь нулевое значение                                                       |
| `DEFAULT`     | значение колонки по умолчанию                                                                 |
| `UNIQUE`      | все значения колонки должны быть уникальными                                                  |
| `PRIMARY KEY` | первичный или основной ключ, уникальный идентификатор записи в текущей таблице                |
| `FOREIGN KEY` | внешний ключ, уникальный идентификатор записи в другой таблице (таблице, связанной с текущей) |
| `CHECK`       | все значения в колонке должны удовлетворять определенному условию                             |
| `INDEX`       | быстрая запись и извлечение данных                                                            |

| DATA TYPE          | Description                                                              |
|--------------------|--------------------------------------------------------------------------|
| `BIGINT`           | `FROM` -9,223,372,036,854,775,808 `TO` 9,223,372,036,854,775,807         |
| `INT`              | `FROM` -2,147,483,648 `TO` 2,147,483,647                                 |
| `SMALLINT`         | `FROM` 	-32,768 `TO` 32,767                                              |
| `TINYINT`          | `FROM` 0 `TO` 255                                                        |
| `BIT`              | `FROM` 0 `TO` 1                                                          |
| `DECIMAL`          | `FROM` -10^38 +1 `TO` 10^38 -1                                           |
| `NUMERIC`          | `FROM` -10^38 +1 `TO` 10^38 -1                                           |
| `MONEY`            | `FROM` -922,337,203,685,477.5808 `TO` +922,337,203,685,477.5807          |
| `SMALLMONEY`       | `FROM` -214,748.3648 `TO` +214,748.3647                                  |
| `FLOAT`            | `FROM` -1.79E + 308 `TO` 1.79E + 308                                     |
| `REAL`             | `FROM` -3.40E + 38 `TO` 3.40E + 38                                       |
| `DATETIME`         | `FROM` Jan 1, 1753 `TO` Dec 31, 9999                                     |
| `SMALLDATETIME`    | `FROM` Jan 1, 1900 `TO` Jun 6, 2079                                      |
| `DATE`             | Дата сохраняется в виде June 30, 1991                                    |
| `TIME`             | Время сохраняется в виде 12:30 P.M.                                      |
| `CHAR`             | Строка длиной до 8,000 символов (не-юникод символы, фиксированной длины) |
| `VARCHAR`          | Строка длиной до 8,000 символов (не-юникод символы, переменной длины)    |
| `TEXT`             | Не-юникод данные переменной длины, длиной до 2,147,483,647 символов      |
| `NCHAR`            | Строка длиной до 4,000 символов (юникод символы, фиксированной длины)    |
| `NVARCHAR`         | Строка длиной до 4,000 символов (юникод символы, переменной длины)       |
| `NTEXT`            | Юникод данные переменной длины, длиной до 1,073,741,823 символов         |
| `BINARY`           | Данные размером до 8,000 байт (фиксированной длины)                      |
| `VARBINARY`        | Данные размером до 8,000 байт (переменной длины)                         |
| `IMAGE`            | Данные размером до 2,147,483,647 байт (переменной длины)                 |
| `TIMESTAMP`        | Уникальные числа, обновляющиеся при каждом изменении строки              |
| `UNIQUEIDENTIFIER` | Глобально-уникальный идентификатор (GUID)                                |
| `CURSOR`           | Объект курсора                                                           |
| `TABLE`            | Промежуточный результат, предназначенный для дальнейшей обработки        |

| Operator  | Description                                                                                                                                                                                                                                                                                                                        |
|-----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `+`       | Сложение                                                                                                                                                                                                                                                                                                                           |
| `-`       | Вычитание                                                                                                                                                                                                                                                                                                                          |
| `*`       | Умножение                                                                                                                                                                                                                                                                                                                          |
| `/`       | Деление                                                                                                                                                                                                                                                                                                                            |
| `%`       | Деление с остатком                                                                                                                                                                                                                                                                                                                 |
| `=`       | Определяет равенство                                                                                                                                                                                                                                                                                                               |
| `!=`      | Определяет неравенство                                                                                                                                                                                                                                                                                                             |
| `<>`      | Определяет неравенство                                                                                                                                                                                                                                                                                                             |
| `>`       | Больше                                                                                                                                                                                                                                                                                                                             |
| `<`       | Меньше                                                                                                                                                                                                                                                                                                                             |
| `>=`      | Больше или равно                                                                                                                                                                                                                                                                                                                   |
| `<=`      | Меньше или равно                                                                                                                                                                                                                                                                                                                   |
| `!<`      | Не меньше                                                                                                                                                                                                                                                                                                                          |
| `!>`      | Не больше                                                                                                                                                                                                                                                                                                                          |
| `ALL`     | Сравнивает все значения                                                                                                                                                                                                                                                                                                            |
| `AND`     | Объединяет условия                                                                                                                                                                                                                                                                                                                 |
| `ANY`     | Сравнивает одно значение с другим, если последнее совпадает с условием                                                                                                                                                                                                                                                             |
| `BETWEEN` | Проверяет вхождение значения в диапазон от минимального до максимального                                                                                                                                                                                                                                                           |
| `EXISTS`  | Определяет наличие строки, соответствующей определенному критерию                                                                                                                                                                                                                                                                  |
| `IN`      | Выполняет поиск значения в списке значений                                                                                                                                                                                                                                                                                         |
| `NOT`     | Инвертирует (меняет на противоположное) смысл других логических операторов                                                                                                                                                                                                                                                         |
| `OR`      | Комбинирует условия (одно из условий должно совпадать)                                                                                                                                                                                                                                                                             |
| `IS NULL` | Определяет, является ли значение нулевым                                                                                                                                                                                                                                                                                           |
| `UNIQUE`  | Определяет уникальность строки                                                                                                                                                                                                                                                                                                     |
| `LIKE`    | Сравнение значений с помощью операторов с подстановочными знаками. Существует два вида таких операторов: проценты (%) нижнее подчеркивание (_) % означает 0, 1 или более символов. _ означает точно 1 символ.                                                                                                                      |
| `REGEX`   | Определить регулярное выражение, которому должна соответствовать запись. В регулярное выражении могут использоваться следующие специальные символы: `^` — начало строки `$` — конец строки `.` — любой символ `[symbol]` — любой из указанных в скобках символов `[start-end]` — любой символ из диапазона `I` — разделяет шаблоны |

| Function                    | Description                                                                   |
|-----------------------------|-------------------------------------------------------------------------------|
| `AVG`                       | вычисляет среднее значение                                                    |
| `SUM`                       | вычисляет сумму значений                                                      |
| `MIN`                       | вычисляет наименьшее значение                                                 |
| `MAX`                       | вычисляет наибольшее значение                                                 |
| `COUNT`                     | вычисляет количество записей в таблице                                        |
| `CONCAT`                    | объединение строк                                                             |
| `LENGTH`                    | возвращает количество символов в строке                                       |
| `TRIM`                      | удаляет пробелы в начале и конце строки                                       |
| `SUBSTRING`                 | извлекает подстроку из строки                                                 |
| `REPLACE`                   | заменяет подстроку в строке                                                   |
| `LOWER`                     | переводит символы строки в нижний регистр                                     |
| `UPPER`                     | переводит символы строки в верхний регистр и т.д.                             |
| `ROUND`                     | округляет число                                                               |
| `TRUNCATE`                  | обрезает дробное число до указанного количества знаков после запятой          |
| `CEILING`                   | возвращает наименьшее целое число, которое больше или равно текущему значению |
| `FLOOR`                     | возвращает наибольшее целое число, которое меньше или равно текущему значению |
| `POWER`                     | возводит число в указанную степень                                            |
| `SQRT`                      | возвращает квадратный корень числа                                            |
| `RAND`                      | генерирует случайное число с плавающей точкой в диапазоне от 0 до 1           |
| `CURDATE` `CURRENT_DATE`    | возвращает текущую дату                                                       |
| `CURTIME` `CURRENT_TIME`    | возвращает текущее время                                                      |
| `DAYOFMONTH(date)`          | возвращает день месяца в виде числа                                           |
| `DAYOFWEEK(date)`           | возвращает день недели в виде числа                                           |
| `DAYOFYEAR(date)`           | возвращает номер дня в году                                                   |
| `MONTH(date)`               | возвращает месяц                                                              |
| `YEAR(date)`                | возвращает год                                                                |
| `LAST_DAY(date)`            | возвращает последний день месяца в виде даты                                  |
| `HOUR(time)`                | возвращает час                                                                |
| `MINUTE(time)`              | возвращает минуты                                                             |
| `SECOND(time)`              | возвращает секунды                                                            |
| `DATE_ADD(date, interval)`  | выполняет сложение даты и определенного временного интервала                  |
| `DATE_SUB(date, interval)`  | выполняет вычитание из даты определенного временного интервала                |
| `DATEDIFF(date1, date2)`    | возвращает разницу в днях между двумя датами                                  |
| `TO_DAYES(date)`            | возвращает количество дней с 0-го дня года                                    |
| `TIME_TO_SEC(time)`         | возвращает количество секунд с полуночи                                       |
| `DATE_FORMAT(date, format)` | форматирования даты                                                           |
| `TIME_FORMAT(date, format)` | форматирования времени                                                        |
